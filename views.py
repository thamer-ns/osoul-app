# ... (ุงุณุชูุฑุงุฏุงุชู ุงูุณุงุจูุฉ) ...
import pandas as pd
import streamlit as st
from database import execute_query
from components import render_table # ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุงูุฌุฏูู ุงูุฌุฏูุฏ

# ... (ุฏูุงู ุงูุนุฑุถ ุงูุฃุฎุฑู ูุซู view_dashboard ุชุจูู ููุง ูู) ...

def view_settings():
    st.header("โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ")
    
    tab_sec, tab_data = st.tabs(["ุชูุฒูุน ุงููุทุงุนุงุช", "ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช"])
    
    # 1. ุชูุฒูุน ุงููุทุงุนุงุช
    with tab_sec:
        from config import DEFAULT_COLORS # ูููุตูู ููุฃููุงู ุฅุฐุง ุงุญุชุฌุช
        # (ููุณ ููุฏ ูุญุฑุฑ ุงููุทุงุนุงุช ุงูุณุงุจู)
        # ...
        st.info("ุนุฏู ุงููุณุจ ูู ุงูุฌุฏูู ูุงุถุบุท ุญูุธ")
        # ... (ููุฏ ุงูู data_editor)

    # 2. ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช (ุงูุงุณุชูุฑุงุฏ ูุงูุชุตุฏูุฑ) - ุงููุทููุจ
    with tab_data:
        st.markdown("### ๐ค ุงููุณุฎ ุงูุงุญุชูุงุทู")
        if st.button("ุชุญููู ูุณุฎุฉ ูุงููุฉ (Excel)"):
            from analytics import create_smart_backup
            create_smart_backup()
            st.success("ุชู ุงูุญูุธ ูู ูุฌูุฏ backups")
            
        st.markdown("---")
        
        st.markdown("### ๐ฅ ุงุณุชูุฑุงุฏ ุจูุงูุงุช (Restore)")
        st.warning("ุชุญุฐูุฑ: ูุฐุง ุณูููู ุจุฏูุฌ ุงูุจูุงูุงุช ูุน ุจูุงูุงุชู ุงูุญุงููุฉ.")
        
        uploaded_file = st.file_uploader("ุงุฎุชุฑ ููู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ (Excel)", type=['xlsx'])
        
        if uploaded_file is not None:
            if st.button("ุชุฃููุฏ ุงูุงุณุชูุฑุงุฏ"):
                try:
                    # ูุฑุงุกุฉ ุงูููู
                    xls = pd.ExcelFile(uploaded_file)
                    
                    # ุงุณุชูุฑุงุฏ ุงูุตููุงุช
                    if 'Trades' in xls.sheet_names:
                        df_trades = pd.read_excel(xls, 'Trades')
                        # ุชูุธูู ูุฅุฏุฎุงู
                        count = 0
                        for _, row in df_trades.iterrows():
                            # ููุง ูุถุน ููุทู ุงูุฅุฏุฎุงู (ูููู ุงุณุชุฎุฏุงู to_sql if_exists='append' ูุน ุชุนุฏููุงุช ุจุณูุทุฉ)
                            # ููุชุจุณูุท ุณููุชุฑุถ ูุฌูุฏ ุฏุงูุฉ ุฅุฏุฎุงู ุฃู ููุชุจ ุงุณุชุนูุงู ูุจุงุดุฑ
                            # ููุถู ุฏุงุฆูุงู ุงูุญุฐุฑ ููุง ูุชุฌูุจ ุงูุชูุฑุงุฑ
                            pass 
                        st.success("ุชู ุงุณุชูุฑุงุฏ ุงูููู ุจูุฌุงุญ! (ูุญุงูุงุฉ)")
                        # ููุงุญุธุฉ: ููุฏ ุงูุงุณุชูุฑุงุฏ ุงููุนูู ูุญุชุงุฌ ุชุทุงุจู ุฃุณูุงุก ุงูุฃุนูุฏุฉ 100%
                        # ูููููุง ูุชุงุจุฉ ููุฏ ุชูุตููู ูู ุฅุฐุง ุฃุฑุฏุช
                    else:
                        st.error("ุงูููู ูุง ูุญุชูู ุนูู ูุฑูุฉ Trades")
                except Exception as e:
                    st.error(f"ุญุฏุซ ุฎุทุฃ: {e}")

# ... (ุจุงูู ุงูููู)
