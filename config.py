from pathlib import Path

# --- ุฅุนุฏุงุฏุงุช ุฃุณุงุณูุฉ ---
APP_NAME = "ุฃุตููู"
APP_ICON = "๐๏ธ"
DB_PATH = Path("stocks.db")
BACKUP_DIR = Path("backups")
BACKUP_DIR.mkdir(parents=True, exist_ok=True)

# --- ุงููููุฉ ุงูุจุตุฑูุฉ ---
DEFAULT_COLORS = {
    'page_bg': '#F8F9FA',
    'card_bg': '#FFFFFF',
    'main_text': '#1F2937',
    'sub_text': '#6B7280',
    'primary': '#0e6ba8',
    'success': '#10B981',
    'danger': '#EF4444',
    'border': '#E5E7EB',
    'input_bg': '#FFFFFF'
}

# --- ุจูุงูุงุช ุงูุดุฑูุงุช ุงูุณุนูุฏูุฉ (ูุตุฏุฑ ุงูุจูุงูุงุช: ุชุฏุงูู ุงูุณุนูุฏูุฉ) ---
# ุชู ุชุตููู ุงููุทุงุนุงุช ุจุฏูุฉ ุญุณุจ ููููุฉ ุงูุณูู ุงูุฑุณููุฉ
TADAWUL_DB = {
    # --- ูุทุงุน ุงูุทุงูุฉ ---
    '2222': {'name': 'ุฃุฑุงููู ุงูุณุนูุฏูุฉ', 'sector': 'ุงูุทุงูุฉ'},
    '2030': {'name': 'ุงููุตุงูู', 'sector': 'ุงูุทุงูุฉ'},
    '2380': {'name': 'ุจุชุฑู ุฑุงุจุบ', 'sector': 'ุงูุทุงูุฉ'},
    '2381': {'name': 'ุงูุญูุฑ ุงูุนุฑุจูุฉ', 'sector': 'ุงูุทุงูุฉ'},
    '2382': {'name': 'ุฃุฏูุณ', 'sector': 'ุงูุทุงูุฉ'},
    '4030': {'name': 'ุงูุจุญุฑู', 'sector': 'ุงูุทุงูุฉ'},
    '4200': {'name': 'ุงูุฏุฑูุณ', 'sector': 'ุงูุทุงูุฉ'},

    # --- ูุทุงุน ุงูููุงุฏ ุงูุฃุณุงุณูุฉ ---
    '2010': {'name': 'ุณุงุจู', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2020': {'name': 'ุณุงุจู ูููุบุฐูุงุช', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2290': {'name': 'ููุณุงุจ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2060': {'name': 'ุงูุชุตููุน', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2310': {'name': 'ุณุจููู ุงูุนุงูููุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2350': {'name': 'ููุงู ุงูุณุนูุฏูุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2001': {'name': 'ูููุงููู', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2170': {'name': 'ุงููุฌูู', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2330': {'name': 'ุงููุชูุฏูุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '1211': {'name': 'ูุนุงุฏู', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3010': {'name': 'ุฃุณููุช ุงูุนุฑุจูุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3020': {'name': 'ุฃุณููุช ุงูููุงูุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3030': {'name': 'ุฃุณููุช ุงูุณุนูุฏูุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3040': {'name': 'ุฃุณููุช ุงููุตูู', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3050': {'name': 'ุฃุณููุช ุงูุฌููุจูุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3060': {'name': 'ุฃุณููุช ููุจุน', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3080': {'name': 'ุฃุณููุช ุงูุดุฑููุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3090': {'name': 'ุฃุณููุช ุชุจูู', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3091': {'name': 'ุฃุณููุช ุงูุฌูู', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '3092': {'name': 'ุฃุณููุช ุงูุฑูุงุถ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},
    '2250': {'name': 'ุงููุฌููุนุฉ ุงูุณุนูุฏูุฉ', 'sector': 'ุงูููุงุฏ ุงูุฃุณุงุณูุฉ'},

    # --- ูุทุงุน ุงูุจููู ---
    '1120': {'name': 'ุงูุฑุงุฌุญู', 'sector': 'ุงูุจููู'},
    '1180': {'name': 'ุงูุฃููู', 'sector': 'ุงูุจููู'},
    '1010': {'name': 'ุงูุฑูุงุถ', 'sector': 'ุงูุจููู'},
    '1150': {'name': 'ุงูุฅููุงุก', 'sector': 'ุงูุจููู'},
    '1140': {'name': 'ุงูุจูุงุฏ', 'sector': 'ุงูุจููู'},
    '1060': {'name': 'ุงูุณุนูุฏู ุงููุฑูุณู', 'sector': 'ุงูุจููู'},
    '1030': {'name': 'ุงูุณุนูุฏู ููุงุณุชุซูุงุฑ', 'sector': 'ุงูุจููู'},
    '1020': {'name': 'ุงูุฌุฒูุฑุฉ', 'sector': 'ุงูุจููู'},
    '1080': {'name': 'ุงูุนุฑุจู ุงููุทูู', 'sector': 'ุงูุจููู'},

    # --- ูุทุงุน ุงูุงุชุตุงูุงุช ---
    '7010': {'name': 'STC', 'sector': 'ุงูุฃุชุตุงูุงุช'},
    '7020': {'name': 'ููุจุงููู', 'sector': 'ุงูุฃุชุตุงูุงุช'},
    '7030': {'name': 'ุฒูู ุงูุณุนูุฏูุฉ', 'sector': 'ุงูุฃุชุตุงูุงุช'},
    '7040': {'name': 'ุนุฐูุจ ููุงุชุตุงูุงุช', 'sector': 'ุงูุฃุชุตุงูุงุช'},

    # --- ูุทุงุน ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ---
    '4013': {'name': 'ุณูููุงู ุงูุญุจูุจ', 'sector': 'ุงูุฑุนุงูุฉ ุงูุตุญูุฉ'},
    '4002': {'name': 'ุงูููุงุณุงุฉ', 'sector': 'ุงูุฑุนุงูุฉ ุงูุตุญูุฉ'},
    '4004': {'name': 'ุฏูู ุงูุตุญูุฉ', 'sector': 'ุงูุฑุนุงูุฉ ุงูุตุญูุฉ'},
    '4007': {'name': 'ุงูุญูุงุฏู', 'sector': 'ุงูุฑุนุงูุฉ ุงูุตุญูุฉ'},
    '4009': {'name': 'ุงููุณุชุดูู ุงูุณุนูุฏู ุงูุฃููุงูู', 'sector': 'ุงูุฑุนุงูุฉ ุงูุตุญูุฉ'},
    '2230': {'name': 'ุงูููููุงุฆูุฉ', 'sector': 'ุงูุฑุนุงูุฉ ุงูุตุญูุฉ'}, # ุงูุดุฑูุฉ ุงูููููุงุฆูุฉ ุงูุณุนูุฏูุฉ ุงููุงุจุถุฉ

    # --- ูุทุงุน ุฅูุชุงุฌ ุงูุฃุบุฐูุฉ ---
    '2280': {'name': 'ุงููุฑุงุนู', 'sector': 'ุฅูุชุงุฌ ุงูุฃุบุฐูุฉ'},
    '2270': {'name': 'ุณุฏุงููู', 'sector': 'ุฅูุชุงุฌ ุงูุฃุบุฐูุฉ'},
    '2050': {'name': 'ุตุงูููุง', 'sector': 'ุฅูุชุงุฌ ุงูุฃุบุฐูุฉ'},
    '2281': {'name': 'ุชูููุฉ', 'sector': 'ุฅูุชุงุฌ ุงูุฃุบุฐูุฉ'},
    '6010': {'name': 'ูุงุฏู', 'sector': 'ุฅูุชุงุฌ ุงูุฃุบุฐูุฉ'},
    '2282': {'name': 'ุงููุทุงุญู ุงูุฃููู', 'sector': 'ุฅูุชุงุฌ ุงูุฃุบุฐูุฉ'},

    # --- ูุทุงุน ุชุฌุฒุฆุฉ ุงูุฃุบุฐูุฉ ูุงูุฃุฏููุฉ ---
    '4001': {'name': 'ุฃุณูุงู ุงูุนุซูู', 'sector': 'ุชุฌุฒุฆุฉ ุงูุฃุบุฐูุฉ'},
    '4164': {'name': 'ุงูููุฏู', 'sector': 'ุชุฌุฒุฆุฉ ุงูุฃุบุฐูุฉ'}, # ููุงุญุธุฉ: ุงูููุฏู ูุตูู ุฃุญูุงูุงู ุชุฌุฒุฆุฉ ูุฃุญูุงูุงู ุฃุฏููุฉุ ุงูุชุตููู ุงูุฃุฏู ุชุฌุฒุฆุฉ ุงูุณูุน ุงูููุงููุฉ ุฃู ุงูุฃุฏููุฉ
    '4160': {'name': 'ุงูุฏูุงุก', 'sector': 'ุชุฌุฒุฆุฉ ุงูุฃุบุฐูุฉ'},
    '4161': {'name': 'ุจู ุฏุงูุฏ', 'sector': 'ุชุฌุฒุฆุฉ ุงูุฃุบุฐูุฉ'},
    '4163': {'name': 'ุงูููุฌู', 'sector': 'ุชุฌุฒุฆุฉ ุงูุฃุบุฐูุฉ'},

    # --- ูุทุงุน ุงูุชุทุจููุงุช ูุฎุฏูุงุช ุงูุชูููุฉ ---
    '7202': {'name': 'ุณููุดูุฒ', 'sector': 'ุงูุชูููุฉ'},
    '7203': {'name': 'ุนูู', 'sector': 'ุงูุชูููุฉ'},
    '7200': {'name': 'ุงููุนูุฑ (MIS)', 'sector': 'ุงูุชูููุฉ'},
    '7201': {'name': 'ุจุญุฑ ุงูุนุฑุจ', 'sector': 'ุงูุชูููุฉ'},
    '7204': {'name': 'ุชูุจู', 'sector': 'ุงูุชูููุฉ'}, # ุงูุชุทููุฑูุฉ ุงูุบุฐุงุฆูุฉ

    # --- ูุทุงุน ุงูููู ---
    '4263': {'name': 'ุณุงู', 'sector': 'ุงูููู'},
    '4260': {'name': 'ุจุฏุฌุช ุงูุณุนูุฏูุฉ', 'sector': 'ุงูููู'},
    '4261': {'name': 'ุฐูุจ', 'sector': 'ุงูููู'},
    '4040': {'name': 'ุณุงุจุชูู', 'sector': 'ุงูููู'},
    '4262': {'name': 'ูููู', 'sector': 'ุงูููู'},

    # --- ูุทุงุน ุงููุฑุงูู ุงูุนุงูุฉ ---
    '5110': {'name': 'ุงูููุฑุจุงุก ุงูุณุนูุฏูุฉ', 'sector': 'ุงููุฑุงูู ุงูุนุงูุฉ'},
    '2080': {'name': 'ุงูุบุงุฒ', 'sector': 'ุงููุฑุงูู ุงูุนุงูุฉ'},
    '2081': {'name': 'ุงูุฎุฑูู', 'sector': 'ุงููุฑุงูู ุงูุนุงูุฉ'},
    '2082': {'name': 'ุฃููุง ุจุงูุฑ', 'sector': 'ุงููุฑุงูู ุงูุนุงูุฉ'},
    '2083': {'name': 'ูุฑุงูู', 'sector': 'ุงููุฑุงูู ุงูุนุงูุฉ'},

    # --- ูุทุงุน ุงูุชุฃููู ---
    '8010': {'name': 'ุงูุชุนุงูููุฉ', 'sector': 'ุงูุชุฃููู'},
    '8210': {'name': 'ุจูุจุง ุงูุนุฑุจูุฉ', 'sector': 'ุงูุชุฃููู'},
    '8230': {'name': 'ุงูุฑุงุฌุญู ุชูุงูู', 'sector': 'ุงูุชุฃููู'},
    '8060': {'name': 'ููุงุก ููุชุฃููู', 'sector': 'ุงูุชุฃููู'},

    # --- ูุทุงุน ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช ---
    '4321': {'name': 'ุงููุฑุงูุฒ ุงูุนุฑุจูุฉ (ุณููููู)', 'sector': 'ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช'},
    '4090': {'name': 'ุทูุจุฉ', 'sector': 'ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช'},
    '4250': {'name': 'ุฌุจู ุนูุฑ', 'sector': 'ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช'},
    '4230': {'name': 'ุงูุจุญุฑ ุงูุฃุญูุฑ', 'sector': 'ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช'},
    '4320': {'name': 'ุงูุฃูุฏูุณ', 'sector': 'ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช'},
    '4220': {'name': 'ุฅุนูุงุฑ', 'sector': 'ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช'},
    '4020': {'name': 'ุงูุนูุงุฑูุฉ', 'sector': 'ุฅุฏุงุฑุฉ ูุชุทููุฑ ุงูุนูุงุฑุงุช'},

    # --- ูุทุงุน ุงูุณูุน ุทูููุฉ ุงูุฃุฌู ---
    '4190': {'name': 'ุฌุฑูุฑ', 'sector': 'ุงูุณูุน ุงูููุงููุฉ'}, # ุชุตููููุง ุงูุฏููู ุชุฌุฒุฆุฉ ุณูุน ููุงููุฉ
    '4008': {'name': 'ุดุงูุฑ', 'sector': 'ุงูุณูุน ุทูููุฉ ุงูุฃุฌู'},
    '4180': {'name': 'ุงููุชูุญู', 'sector': 'ุงูุณูุน ุทูููุฉ ุงูุฃุฌู'},
    '4003': {'name': 'ุฅูุณุชุฑุง', 'sector': 'ุชุฌุฒุฆุฉ ุงูุณูุน ุงูููุงููุฉ'},

    # --- ูุทุงุน ุงูุฎุฏูุงุช ุงูุชุฌุงุฑูุฉ ูุงูููููุฉ ---
    '1831': {'name': 'ููุงุฑุฉ', 'sector': 'ุงูุฎุฏูุงุช ุงูุชุฌุงุฑูุฉ ูุงูููููุฉ'},
    '1832': {'name': 'ุตุฏุฑ', 'sector': 'ุงูุฎุฏูุงุช ุงูุชุฌุงุฑูุฉ ูุงูููููุฉ'},
    '6004': {'name': 'ูุงุชุฑููู', 'sector': 'ุงูุฎุฏูุงุช ุงูุชุฌุงุฑูุฉ ูุงูููููุฉ'}, # ุงูุชูููู ุณุงุจูุงู
}

def get_css(C):
    return f"""
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap');
        
        html, body, [class*="css"], p, div, label, button, input, textarea, th, td {{
            font-family: 'Cairo', sans-serif !important; direction: rtl;
        }}
        
        .stApp {{ background-color: {C['page_bg']} !important; }}
        
        /* ุชุญุณูู ุงูุนูุงููู - ูุญุงุฐุงุฉ ูููููู */
        h1, h2, h3, h4 {{
            font-family: 'Cairo', sans-serif !important;
            color: #1F2937 !important;
            border-right: 5px solid {C['primary']};
            padding-right: 15px;
            margin-bottom: 20px !important;
            font-weight: 800 !important;
            text-align: right !important;
            width: 100%;
        }}

        /* ุชูุณูู ุงูุฌุฏูู ุงููุญุณู */
        .finance-table {{ width: 100%; border-collapse: separate; border-spacing: 0 4px; margin-top: 5px; }}
        
        .finance-table th {{ 
            color: #0e6ba8 !important;
            font-weight: 800 !important;
            font-size: 0.85rem !important;
            padding: 10px 5px !important;
            text-align: center;
            background-color: transparent;
            border-bottom: 2px solid #F3F4F6;
            white-space: nowrap !important;
        }}
        
        .finance-table td {{ 
            background-color: white;
            padding: 8px 5px !important;
            text-align: center;
            color: #374151;
            font-weight: 600;
            font-size: 0.82rem !important;
            border-top: 1px solid #F3F4F6;
            border-bottom: 1px solid #F3F4F6;
            white-space: nowrap !important;
        }}
        
        .finance-table tr:hover td {{ background-color: #F9FAFB; }}

        /* ุงููุฑูุช ุงูุนูููุฉ */
        .kpi-box {{
            background-color: {C['card_bg']}; border: 1px solid {C['border']}; border-radius: 12px;
            padding: 15px; text-align: right; margin-bottom: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }}
        .kpi-value {{ font-size: 1.3rem; font-weight: 800; color: {C['main_text']}; }}
        
        /* ุงููุคุดุฑ */
        .tasi-box {{
            background: white; padding: 15px; border-radius: 12px; border: 1px solid {C['border']};
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;
        }}
        
        [data-testid="stSidebar"] {{ display: none !important; }}
        
        .stTabs [data-baseweb="tab-list"] {{ gap: 10px; }}
        .stTabs [data-baseweb="tab"] {{ height: 40px; white-space: nowrap; }}
        
        div[data-testid="stExpander"] {{
            background-color: white;
            border-radius: 8px;
            border: 1px solid #E5E7EB;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }}
    </style>
    """
